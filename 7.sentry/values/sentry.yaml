# Usuário inicial do Sentry
user:
  create: true
  email: admin@sentry.local
  password: "admin123"          # troque depois
  isSuperuser: true


# Banco e Redis "embutidos" (bons para laboratório local)
postgresql:
  enabled: true
  auth:
    username: sentry
    password: sentry
    database: sentry

redis:
  enabled: true


# Ingress
ingress:
  enabled: true
  ingressClassName: nginx
  hosts:
    - host: sentry.127.0.0.1.nip.io
      paths:
        - path: /
          pathType: Prefix
  tls:
    - secretName: https-certs
      hosts:
        - sentry.127.0.0.1.nip.io


# Para ambiente local, reduzir réplicas ajuda a subir rápido
sentry:
  web:
    replicaCount: 1
  worker:
    replicaCount: 1
  cron:
    replicaCount: 1

# Sentry settings
config:
  sentryConfPy: |
    # Liga profiling no backend
    SENTRY_USE_PROFILING = True

    # Garante que a UI habilite os painéis de performance/profiling
    SENTRY_FEATURES.update({
        "organizations:discover": True,
        "organizations:events": True,
        "organizations:global-views": True,
        "organizations:incidents": True,
        "organizations:integrations-issue-basic": True,
        "organizations:integrations-issue-sync": True,
        "organizations:invite-members": True,
        "organizations:metric-alert-builder-aggregate": True,
        "organizations:sso-basic": True,
        "organizations:sso-rippling": True,
        "organizations:sso-saml2": True,
        "organizations:performance-view": True,
        "organizations:advanced-search": True,
        "organizations:session-replay": True,
        "organizations:issue-platform": True,
        "organizations:profiling": True,
        "organizations:profiling-view": True,
        "organizations:metrics": True,
        "organizations:performance-issues": True,
        "organizations:monitors": True,
        "organizations:dashboards-mep": True,
        "organizations:mep-rollout-flag": True,
        "organizations:dashboards-rh-widget": True,
        "organizations:metrics-extraction": True,
        "organizations:transaction-metrics-extraction": True,
        "projects:custom-inbound-filters": True,
        "projects:data-forwarding": True,
        "projects:discard-groups": True,
        "projects:plugins": True,
        "projects:rate-limits": True,
        "projects:servicehooks": True,
        "organizations:deprecate-fid-from-performance-score": True,
        "organizations:indexed-spans-extraction": True,
        "organizations:insights-entry-points": True,
        "organizations:insights-initial-modules": True,
        "organizations:insights-addon-modules": True,
        "organizations:mobile-ttid-ttfd-contribution": True,
        "organizations:performance-calculate-score-relay": True,
        "organizations:standalone-span-ingestion": True,
        "organizations:starfish-browser-resource-module-image-view": True,
        "organizations:starfish-browser-resource-module-ui": True,
        "organizations:starfish-browser-webvitals": True,
        "organizations:starfish-browser-webvitals-pageoverview-v2": True,
        "organizations:starfish-browser-webvitals-replace-fid-with-inp": True,
        "organizations:starfish-browser-webvitals-use-backend-scores": True,
        "organizations:starfish-mobile-appstart": True,
        "projects:span-metrics-extraction": True,
        "projects:span-metrics-extraction-addons": True,
        "organizations:user-feedback-ingest": True,
        "organizations:user-feedback-replay-clip": True,
        "organizations:user-feedback-ui": True,
    })
  configYml:
    system.url-prefix: "http://sentry.127.0.0.1.nip.io"
    maxRequestBodySize: 2000000
    maxResponseBodySize: 2000000
  snubaSettingsPy: |
    # No Python Extension Config Given
  relay: |
    # No YAML relay config given
  web:
    httpKeepalive: 15
    httpChunkedInput: true
    workers: 3
    memoryReport: false
    maxRequests: 100000
    maxRequestsDelta: 500
    maxWorkerLifetime: 86400
    thunderLock: true
    logXForwardedFor: false
    bufferSize: 32768
    limitPost: 209715200
    disableLogging: true
    reloadOnRss: 600
    ignoreSignpipe: true
    ignoreWriteErrors: true
    disableWriteException: true


